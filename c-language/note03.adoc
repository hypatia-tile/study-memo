= Structures

* A structure type (also known as a `struct`) contains sequentially allocated member objects.
* Each objects has its own name and may have a distinct type -- unlike arrays,
which must all be of the same type.
* Structures are similar to record types found in other porgramming languages.

== Declares an structure

Declare an object identified by `sigline` that has a type of `struct sigrecord`
and a pointer to the `sigline` object identified by `sigline`:
[source,c]
----
struct sigrecord {
    int signum;
    char signame[20];
    char sigdesc[100];
} sigline, *sigline_p;
----
The  structure has three member objects:

. `signum` is an object of type `int`
. `signame` is an array of type char consisting of 20 characters
. `sigdesc` is an array of 100 characters

Structures are useful for declaring collections of related objects
and may be used to represent things such as
a date, customer, or personal record.
They are expecially useful for grouping objects
that are frequently passed together as arguments to a function,
so you don't need to repeatedly pass individual objects separately.

== Excercise
Write a program that declares a structure type `sigrecord` with the following members:
[source, c]
----
#include <stdio.h>

struct sigrecord {
    int signum;
    char signame[20];
    char sigdesc[100];
} sigline, *sigline_p;

int main() {
    sigline.signum = 1;
    snprintf(sigline.signame, sizeof(sigline.signame), "SIGINT");
    snprintf(sigline.sigdesc, sizeof(sigline.sigdesc), "Interrupt from keyboard");

    sigline_p = &sigline;

    printf("Signal Number: %d\n", sigline_p->signum);
    printf("Signal Name: %s\n", sigline_p->signame);
    printf("Signal Description: %s\n", sigline_p->sigdesc);

    return 0;
}
----

=== Explanation of the code

This code defines a structure named `sigrecord`
that represents information about a signal.
The structure contains three members:

. `signum`: +
An integer to store the signal number.
. `signame`: +
A character array to store the signal name.
. `sigdesc`: +
A character array to store a description of the signal.

In the `main` function,
an instance of the `sigrecord` structure named `sigline` is created,
along with a pointer to the structure,
`sigline_p`.
The program initializes the `sigline` structure
by assigning values to its members.
The `signum` field is set to `1`,
representing the signal number.
The `snpringf` function is used to safely copy the signal name
(`"SIGINT"`) and description (`"Interrupt from keyboard"`)
into the respective character arrays,
ensuring that the data fits within the allocated space.

The pointer `sigline_p` is
then assigned the address of the `sigline` structure.
Using this pointer,
the program accesses and prints the structure's members.
The `->` operator is used to dereference the pointer
and access the fields of the structure it points to.
The `printf` function
outputs the signal number, name, and description to the console.

This program demonstrates key concepts in C programming,
such as defining and using structures,
working with pointers to structures,
and safely handling strings with `snprintf`.
It also highlights the impotance of using pointers
to access and manipulate data effeciently.

. `snprintf` +
[source, c]
----
snprintf(sigline.signame, sizeof(sigline.signame), "SIGINT");
----
+
is a function call to `snprintf`,
which is a safer alternative to `sprintf`
for formatting and storing strings.
This function writes a formatted string into a charactor array,
ensuring that the size of the array is not exceeded,
thereby preventing buffer overflow
-- a common source of bugs and security vulnerabilities in C programs.

=== Breakdown of the code

. `signal.signame`: +
This is the destination buffer where the formatted string will be stored.
It is assumed to be a member of a structure named `sigline`,
likely defined elsewhere in your code.
The `signame` field is presumably a character array intended to hold the name of a signal.
. `sizeof(sigline.signame)`: +
This specifies the maximum number of bytes
that can be written to the `signame` buffer,
including the null-terminating character (`\0`).
By using `sizeof`, the code dynamically determines the size of the array,
redusing the risk of hardcoding an incorrect size.
. `"SIGINT"`: +
This is the string literal being written into the `signame` buffer.
In this context, `"SIGINT"` represents the name of the signal,
specifically the interrupt signal generated by pressing `Ctrl+C` in most terminal environments.

